(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.domReady;var a=e.n(n);const r=window.wp.element,l=window.wp.components,o=()=>{const[e,n]=(0,r.useState)(""),[a,o]=(0,r.useState)("#a0b8c3"),[i,s]=(0,r.useState)("#ffffff"),[c,p]=(0,r.useState)(5),[d,g]=(0,r.useState)("16px"),[m,u]=(0,r.useState)({}),[y,C]=(0,r.useState)(""),[f,h]=(0,r.useState)([]),[E,x]=(0,r.useState)(""),[v,w]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{const e=await fetch("/wp-json/product-notices/v1/get-notices/");if(e.ok){const t=await e.json(),a=get_current_user_id();u(t),t[a]&&(n(t[a]),o(t[`${a}_color`]||"#a0b8c3"),s(t[`${a}_textColor`]||"#ffffff"),p(t[`${a}_borderRadius`]||5),g(t[`${a}_fontSize`]||"16px"))}})(),(async()=>{try{const e=await fetch("/wp-json/product-notices/v1/get-product-categories",{headers:{"X-WP-Nonce":wpApiSettings.nonce},credentials:"include"});if(e.ok){const t=await e.json();h(t),console.log("Fetched product categories:",t.length)}else console.error("Failed to fetch product categories:",e.status,e.statusText)}catch(e){console.error("Error fetching product categories:",e)}})()}),[]),(0,t.createElement)("div",null,(0,t.createElement)("h1",null,"Product Notice â€“ Global Settings"),y&&(0,t.createElement)("div",{style:{marginBottom:"10px",color:"green"}},y),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},"Global Product Notice"),(0,t.createElement)("div",{style:{gridColumn:"span 4",width:"100%"}},(0,t.createElement)(l.TextareaControl,{id:"product-notice",label:"",value:e,onChange:e=>n(e),style:{height:"39px",width:"100%"}}))),(0,t.createElement)("h3",{style:{paddingTop:"10px"}},"Display Rules"),(0,t.createElement)("h4",null,"Use to display the global notice on selected product categories and tags."),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",margin:"10px 0"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},"Enable Rules "),(0,t.createElement)(l.CheckboxControl,{style:{gridColumn:"span 2",margin:"0"},label:"",onChange:()=>{w((e=>!e))}})),v&&(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",margin:"10px 0"}},(0,t.createElement)("label",{style:{gridColumn:"span 2",margin:"0"}},"Select Product Category"),(0,t.createElement)("div",{style:{gridColumn:"span 6",minWidth:"190px",maxWidth:"67%"}},(0,t.createElement)(l.SelectControl,{value:E,options:[{label:"Select a category",value:""},...f.map((e=>({label:`${e.name} (${e.count} products)`,value:e.term_id.toString()})))],onChange:e=>x(e),style:{width:"100%",fontSize:"12px"}})))," ",(0,t.createElement)("div",null,(0,t.createElement)("h3",{style:{paddingTop:"10px"}},"Appearance"),(0,t.createElement)("h4",null,"Customize the look & feel of your Global Notice."),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("label",{style:{gridColumn:"span 2",margin:"0"}},"Select Background Color:"),(0,t.createElement)("input",{type:"color",value:a,onChange:e=>o(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}})),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("label",{style:{gridColumn:"span 2",margin:"0"}},"Select Text Color:"),(0,t.createElement)("input",{type:"color",value:i,onChange:e=>s(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}})),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("label",{style:{gridColumn:"span 2",margin:"0"}},"Select Font Size (px):"),(0,t.createElement)("input",{type:"number",value:parseInt(d),onChange:e=>g(`${e.target.value}px`),style:{gridColumn:"span 2",margin:"0",width:"50px"}})),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("label",{style:{gridColumn:"span 2",margin:"0"}},"Border Radius:"),(0,t.createElement)("input",{type:"number",value:c,onChange:e=>p(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}}))),(0,t.createElement)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:a,borderRadius:`${c}px`,color:i,gridColumn:"span 12"}},(0,t.createElement)("p",{style:{}},e)),(0,t.createElement)(l.Button,{variant:"contained",onClick:async()=>{if(""===e.trim())return;const t=await fetch("/wp-json/product-notices/v1/save/",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({notice:e,bgColor:a,textColor:i,borderRadius:c,fontSize:d,category:E})});if(!t.ok){const e=await t.json();return console.error("Error response:",e),void C("Failed to save notice. Please try again.")}C("Notice saved successfully!");const n=get_current_user_id();u((t=>({...t,[n]:e,[`${n}_color`]:a,[`${n}_textColor`]:i,[`${n}_borderRadius`]:c,[`${n}_fontSize`]:d,[`${n}_category`]:E})))}},"Save Notice"))};a()((()=>{(0,r.createRoot)(document.getElementById("product-notices-react-settings")).render((0,t.createElement)(o,null))}))})();