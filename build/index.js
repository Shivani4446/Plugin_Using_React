(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,n=window.wp.domReady;var a=e.n(n);const r=window.wp.element,o=window.wp.components,l=window.wp.i18n,i=()=>{const[e,n]=(0,r.useState)(""),[a,i]=(0,r.useState)("#a0b8c3"),[s,d]=(0,r.useState)("#ffffff"),[c,p]=(0,r.useState)(5),[g,m]=(0,r.useState)("16px"),[u,x]=(0,r.useState)({}),[y,h]=(0,r.useState)(""),[_,E]=(0,r.useState)([]),[f,w]=(0,r.useState)([]),[C,v]=(0,r.useState)(""),[S,b]=(0,r.useState)(""),[T,P]=(0,r.useState)(!1),[R,k]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(async()=>{const e=await fetch("/wp-json/product-notices/v1/get-notices/");if(e.ok){const t=await e.json(),a=get_current_user_id();x(t),t[a]&&(n(t[a]),i(t[`${a}_color`]||"#a0b8c3"),d(t[`${a}_textColor`]||"#ffffff"),p(t[`${a}_borderRadius`]||5),m(t[`${a}_fontSize`]||"16px"))}})(),(async()=>{try{const e=await fetch("/wp-json/product-notices/v1/get-product-categories",{headers:{"X-WP-Nonce":wpApiSettings.nonce},credentials:"include"});if(e.ok){const t=await e.json();E(t),console.log("Fetched product categories:",t.length)}else console.error("Failed to fetch product categories:",e.status,e.statusText)}catch(e){console.error("Error fetching product categories:",e)}})(),(async()=>{try{const e=await fetch("/wp-json/product-notices/v1/get-product-tags",{headers:{"X-WP-Nonce":wpApiSettings.nonce},credentials:"include"});if(e.ok){const t=await e.json();w(t),console.log("Fetched product tags:",t.length)}else console.error("Failed to fetch product tags:",e.status,e.statusText)}catch(e){console.error("Error fetching product tags:",e)}})()}),[]),(0,t.createElement)(o.Panel,null,(0,t.createElement)(o.PanelBody,{style:{backgroundColor:"#F5E3D8",margin:"10px"}},(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("h1",null,(0,l.__)("Product Notice â€“ Global Settings","text-domain")),y&&(0,t.createElement)("div",{style:{marginBottom:"10px",color:"green"}},y),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px"}},(0,t.createElement)("h3",{style:{gridColumn:"span 2",margin:"0",marginTop:"10px"}},(0,l.__)("Global Product Notice","text-domain")),(0,t.createElement)("div",{style:{gridColumn:"span 4",width:"100%"}},(0,t.createElement)(o.TextareaControl,{id:"product-notice",label:"",value:e,onChange:n,style:{height:"39px",width:"100%"}})))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("h2",{style:{paddingTop:"25px"}},(0,l.__)("Display Rules","text-domain")),(0,t.createElement)("h4",null,(0,l.__)("Use to display the global notice on selected product categories and tags.","text-domain")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",margin:"10px 0"}},(0,t.createElement)("h3",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Enable Rules","text-domain")),(0,t.createElement)(o.CheckboxControl,{onChange:()=>{P((e=>!e))},style:{gridColumn:"span 2",margin:"0"}}))),T&&(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",margin:"10px 0"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Show on Category  ","text-domain")),(0,t.createElement)("div",{style:{gridColumn:"span 6",minWidth:"190px",maxWidth:"67%"}},(0,t.createElement)(o.SelectControl,{value:S,options:[{label:(0,l.__)("Select one or more categories","text-domain"),value:""},..._.map((e=>({label:`${e.name}`,value:e.term_id.toString()})))],onChange:e=>b(e),style:{width:"100%",fontSize:"12px",height:"39px"}}))),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",margin:"10px 0"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Show on Tags","text-domain")),(0,t.createElement)("div",{style:{gridColumn:"span 6",minWidth:"190px",maxWidth:"67%"}},(0,t.createElement)(o.SelectControl,{value:C,options:[{label:(0,l.__)("Select one or more tags","text-domain"),value:""},...f.map((e=>({label:`${e.name}`,value:e.term_taxonomy_id.toString()})))],onChange:e=>v(e),style:{width:"100%",fontSize:"12px",height:"39px"}})))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("h2",{style:{paddingTop:"25px"}},(0,l.__)("Appearance","text-domain")),(0,t.createElement)("h4",null,(0,l.__)("Customize the look & feel of your Global Notice.","text-domain")),(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",width:"100%"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Select Background Color:","text-domain")),(0,t.createElement)("input",{type:"color",value:a,onChange:e=>i(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}}))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px",width:"100%"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Select Text Color:","text-domain")),(0,t.createElement)("input",{type:"color",value:s,onChange:e=>d(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}}))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px",width:"100%"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Select Font Size (px):","text-domain")),(0,t.createElement)("input",{type:"number",value:parseInt(g),onChange:e=>m(`${e.target.value}px`),style:{gridColumn:"span 2",margin:"0",width:"50px"}}))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("div",{style:{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",alignItems:"center",gap:"10px",paddingTop:"10px",width:"100%"}},(0,t.createElement)("h4",{style:{gridColumn:"span 2",margin:"0"}},(0,l.__)("Border Radius:","text-domain")),(0,t.createElement)("input",{type:"number",value:c,onChange:e=>p(e.target.value),style:{gridColumn:"span 2",margin:"0",width:"50px"}}))),(0,t.createElement)(o.PanelRow,null,(0,t.createElement)("h2",{style:{paddingTop:"20px"}},(0,l.__)("Preview","text-domain")),(0,t.createElement)("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:a,fontSize:g,borderRadius:`${c}px`,color:s}},(0,t.createElement)("p",{style:{fontSize:g}}," ",e))),(0,t.createElement)(o.Button,{onClick:async()=>{if(""===e.trim())return;const t=await fetch("/wp-json/product-notices/v1/save/",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({notice:e,bgColor:a,textColor:s,borderRadius:c,fontSize:g,tags:C,category:S})});if(!t.ok){const e=await t.json();return console.error("Error response:",e),void h((0,l.__)("Failed to save notice. Please try again.","text-domain"))}h((0,l.__)("Notice saved successfully!","text-domain"));const n=get_current_user_id();x((t=>({...t,[n]:e,[`${n}_color`]:a,[`${n}_textColor`]:s,[`${n}_borderRadius`]:c,[`${n}_fontSize`]:g,[`${n}_category`]:S})))},style:{background:"linear-gradient(90deg, rgb(24 171 250) 0%, rgb(70, 130, 250) 100%)",color:"#fff",padding:"10px 20px",marginTop:"18px",borderRadius:"5px",border:"none",cursor:"pointer",fontSize:"16px",transition:"background 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(90deg, rgb(70, 130, 250) 0%, rgb(24, 47, 250) 100%)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(90deg, rgb(24, 47, 250) 0%, rgb(70, 130, 250) 100%)"}},(0,l.__)("Save Notice","text-domain"))))};a()((()=>{(0,r.createRoot)(document.getElementById("product-notices-react-settings")).render((0,t.createElement)(i,null))}))})();